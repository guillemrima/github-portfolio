<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="/style.css">
    <title>Portfolio Github | Guillemrima</title>
</head>
<body>
    <div class="container__profile">
        <div class="container__avatar">
            <img class="avatar" id="avatar" src="" width="300px">
        </div>
        <h1 class="name" id="name">NOMBRE:</h1>
        <p class="bio" id="bio">BIO:</p>
        <p class="location" id="location">LOCATION:</p>
        <div class="container__follow">
            <div class="container__following">
                <p class="following" id="following">FOLLOWING:</p><p id="number__following"></p>
            </div>
            <div class="container__followers">
                <p class="followers" id="followers">FOLLOWERS:</p><p id="number__followers"></p>
            </div>
        </div>
        <div class="container__repos">
            <p id="repos">REPOS:</p>
        </div>
        <h2>Issues</h2>
        <div id="issues"></div>
    </div>

    <script> 
        const REPO = "github-portfolio"
        const USER = "guillemrima"
        const ISSUES_URL = `https://api.github.com/repos/${USER}/${REPO}/issues`
        const PROFILE_URL = "https://api.github.com/users/guillemrima";
        const repoURL = "https://api.github.com/users/guillemrima/repos";

        fetch(PROFILE_URL).then(
            (response) => {
                const data = response.json().then(
                    (json) => {
                        hydrateDOM(json);
                    }
                );
            }
        )

        fetch(ISSUES_URL).then(res =>{
            res.json().then(data => {
                console.log(data)
                hydrateIssues(data);
            })
        })

        function hydrateIssues(json){
            const el = document.getElementById("issues");

            json.forEach(issue => {
                const issueEl = document.createElement("a")
                issueEl.innerHTML = issue.title
                issueEl.href = issue.number
                el.appendChild(issueEl)
                
            })
        }

        function hydrateDOM(json){
            console.log(json);
            const name = json.name;
            const location = json.location;
            const bio = json.bio;
            const avatar = json.avatar_url;
            const following = json.following;
            const followers = json.followers;

            nameEl.innerHTML = name;
            locationEl.innerHTML = location;
            avatarEl.src = avatar;
            bioEl.innerHTML = bio;
            followingEl.innerHTML = following;   
            followersEl.innerHTML = followers;    
        }

        const nameEl = document.getElementById("name");
        const avatarEl = document.getElementById("avatar");
        const bioEl = document.getElementById("bio");
        const locationEl = document.getElementById("location");
        const followersEl = document.getElementById("number__followers");
        const followingEl = document.getElementById("number__following");

    </script>
</body>
</html>